import{d as e,P as s,_ as t,h as i,o as r,c as a,i as l,w as o,m as n}from"./main-chunk-0e8e2f38.js";import{h as d,i as p,e as u,S as c}from"./swiper-chunk-99168971.js";import{E as m}from"./effect-fade-chunk-5686ebea.js";function w(e){let{swiper:s,extendParams:t,on:i}=e;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,a=!1;function l(){const e=s.thumbs.swiper;if(!e||e.destroyed)return;const t=e.clickedIndex,i=e.clickedSlide;if(i&&i.classList.contains(s.params.thumbs.slideThumbActiveClass))return;if(null==t)return;let r;r=e.params.loop?parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10):t,s.params.loop?s.slideToLoop(r):s.slideTo(r)}function o(){const{thumbs:e}=s.params;if(r)return!1;r=!0;const t=s.constructor;if(e.swiper instanceof t)s.thumbs.swiper=e.swiper,Object.assign(s.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(s.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),s.thumbs.swiper.update();else if(p(e.swiper)){const i=Object.assign({},e.swiper);Object.assign(i,{watchSlidesProgress:!0,slideToClickedSlide:!1}),s.thumbs.swiper=new t(i),a=!0}return s.thumbs.swiper.el.classList.add(s.params.thumbs.thumbsContainerClass),s.thumbs.swiper.on("tap",l),!0}function n(e){const t=s.thumbs.swiper;if(!t||t.destroyed)return;const i="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():t.params.slidesPerView;let r=1;const a=s.params.thumbs.slideThumbActiveClass;if(s.params.slidesPerView>1&&!s.params.centeredSlides&&(r=s.params.slidesPerView),s.params.thumbs.multipleActiveThumbs||(r=1),r=Math.floor(r),t.slides.forEach((e=>e.classList.remove(a))),t.params.loop||t.params.virtual&&t.params.virtual.enabled)for(let n=0;n<r;n+=1)u(t.slidesEl,`[data-swiper-slide-index="${s.realIndex+n}"]`).forEach((e=>{e.classList.add(a)}));else for(let n=0;n<r;n+=1)t.slides[s.realIndex+n]&&t.slides[s.realIndex+n].classList.add(a);const l=s.params.thumbs.autoScrollOffset,o=l&&!t.params.loop;if(s.realIndex!==t.realIndex||o){const r=t.activeIndex;let a,n;if(t.params.loop){const e=t.slides.filter((e=>e.getAttribute("data-swiper-slide-index")===`${s.realIndex}`))[0];a=t.slides.indexOf(e),n=s.activeIndex>s.previousIndex?"next":"prev"}else a=s.realIndex,n=a>s.previousIndex?"next":"prev";o&&(a+="next"===n?l:-1*l),t.visibleSlidesIndexes&&t.visibleSlidesIndexes.indexOf(a)<0&&(t.params.centeredSlides?a=a>r?a-Math.floor(i/2)+1:a+Math.floor(i/2)-1:a>r&&t.params.slidesPerGroup,t.slideTo(a,e?0:void 0))}}s.thumbs={swiper:null},i("beforeInit",(()=>{const{thumbs:e}=s.params;if(e&&e.swiper)if("string"==typeof e.swiper||e.swiper instanceof HTMLElement){const t=d(),i=()=>{const i="string"==typeof e.swiper?t.querySelector(e.swiper):e.swiper;if(i&&i.swiper)e.swiper=i.swiper,o(),n(!0);else if(i){const t=r=>{e.swiper=r.detail[0],i.removeEventListener("init",t),o(),n(!0),e.swiper.update(),s.update()};i.addEventListener("init",t)}return i},r=()=>{if(s.destroyed)return;i()||requestAnimationFrame(r)};requestAnimationFrame(r)}else o(),n(!0)})),i("slideChange update resize observerUpdate",(()=>{n()})),i("setTransition",((e,t)=>{const i=s.thumbs.swiper;i&&!i.destroyed&&i.setTransition(t)})),i("beforeDestroy",(()=>{const e=s.thumbs.swiper;e&&!e.destroyed&&a&&e.destroy()})),Object.assign(s.thumbs,{init:o,update:n})}const f=e({name:"ProductColorSlider",components:{Swiper:c},setup(){const e=s(null);return{EffectFade:m,Thumbs:w,setThumbsSwiper:s=>{e.value=s},thumbsSwiper:e}}}),h={class:"color-slider"};const b=t(f,[["render",function(e,s,t,d,p,u){const c=i("swiper");return r(),a("article",h,[l(c,{class:"color-slider__photo",modules:[e.Thumbs,e.EffectFade],thumbs:{swiper:e.thumbsSwiper},"space-between":0,"slides-per-view":1,effect:"fade","fade-effect":{crossFade:!0},speed:500},{"wrapper-start":o((()=>[n(e.$slots,"default")])),_:3},8,["modules","thumbs"]),l(c,{class:"color-slider__thumbs",modules:[e.Thumbs],"space-between":0,"slides-per-view":"auto",speed:500,watchSlidesProgress:!0,onSwiper:e.setThumbsSwiper},{"wrapper-start":o((()=>[n(e.$slots,"thumbs")])),_:3},8,["modules","onSwiper"])])}]]);export{b as default};
