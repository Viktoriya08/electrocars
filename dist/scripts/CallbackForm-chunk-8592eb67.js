import e from"./InputText-chunk-675f41fd.js";import a from"./FadeTransition-chunk-e258e4e0.js";import{c as s}from"./closeTimer-chunk-812bc3f8.js";import{u as t,r as o,m as r,c as l}from"./index-chunk-b278f882.js";import{d as n,Y as i,E as m,_ as d,h as c,k as u,o as p,c as h,a as f,i as _,e as v,w as b,l as k,v as g,t as $,z as x}from"./main-chunk-fdacad84.js";import"./InputTemplate-chunk-df175f93.js";import"./getMask-chunk-73dd093f.js";const F=n({name:"CallbackForm",components:{FadeTransition:a,InputText:e},mixins:[s],props:{agreement:{type:String,default:()=>"#"}},setup(){const e=i({}),{withMessage:a}=l,s=m("viewportUntil"),o=m("modalId");return{viewportUntil:s,withMessage:a,externalResults:e,v$:t({$externalResults:e}),modalId:o}},data:()=>({isFinished:!1,formData:{name:"",phone:""}}),validations(){return{formData:{name:{required:this.withMessage("Поле обязательно для заполнения",o)},phone:{required:this.withMessage("Поле обязательно для заполнения",o),minLength:this.withMessage("Некорректный номер телефона",r(18))}}}},methods:{sendForm(){this.v$.$validate().then((e=>{e&&(this.isFinished=!0,this.startCloseTimer(this.modalId))})).catch((e=>{console.log(e)}))}}}),T=f("div",{class:"form__title"}," Отправьте заявку. Мы свяжемся с вами в ближайшее время. ",-1),w={class:"form__items"},D={class:"form__item"},I={class:"form__item"},j={class:"form__bottom"},y={class:"form__submit"},M=["disabled"],V={class:"form__policy"},U=["href"],C={class:"form__final"},q={class:"form__title"},E=f("br",null,null,-1),R=f("br",null,null,-1),S={class:"form__close"},z=f("span",{class:"form__close-text"},"Окно автоматически закроется через",-1),L={class:"form__close-time"};const Y=d(F,[["render",function(e,a,s,t,o,r){const l=c("InputText"),n=c("FadeTransition"),i=u("animate");return p(),h("form",{class:"form",onSubmit:a[2]||(a[2]=x(((...a)=>e.sendForm&&e.sendForm(...a)),["prevent"]))},[T,f("div",w,[f("div",D,[_(l,{id:"name-callback",modelValue:e.formData.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData.name=a),errors:e.v$.formData.name.$errors,label:"Как вас зовут?",autocomplete:"given-name",placeholder:"Укажите имя"},null,8,["modelValue","errors"])]),f("div",I,[_(l,{id:"phone-review",modelValue:e.formData.phone,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.phone=a),errors:e.v$.formData.phone.$errors,label:"Укажите телефон",placeholder:"+7 999 999-99-99",type:"tel",autocomplete:"tel","mask-type":"phoneMask","required-text":"Обязательное поле"},null,8,["modelValue","errors"])])]),f("div",j,[f("div",y,[f("button",{class:"btn btn--color-primary",type:"submit",disabled:e.v$.$error&&e.v$.$dirty}," Отправить заявку ",8,M)]),f("p",V,[v(" Отправляя данные, вы соглашаетесь с "),f("a",{href:e.agreement,target:"_blank"},"политикой конфиденциальности",8,U)])]),_(n,null,{default:b((()=>[k(f("div",C,[k((p(),h("h3",q,[v(" Заявка отправлена! "),E,v(" Мы свяжемся с вами "),R,v(" в ближайшее время. ")])),[[i,{animationClass:"fadeInUp"}]]),f("div",S,[z,f("span",L,$(e.getCloseTimer),1)])],512),[[g,e.isFinished]])])),_:1})],32)}]]);export{Y as default};
