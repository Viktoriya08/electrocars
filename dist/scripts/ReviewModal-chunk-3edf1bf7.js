import{d as e,Y as a,E as s,_ as o,h as t,k as r,o as l,c as m,a as i,i as n,e as d,w as c,l as u,v as p,t as h,z as f,Z as _,b as v}from"./main-chunk-fdacad84.js";import g from"./BaseModal-chunk-2b62698c.js";import{I as w}from"./IconSVG-chunk-cd8e7ea2.js";import b from"./InputText-chunk-675f41fd.js";import k from"./InputTextarea-chunk-64f96d2e.js";import I from"./FadeTransition-chunk-e258e4e0.js";import{c as x}from"./closeTimer-chunk-812bc3f8.js";import{u as $,r as F,m as M,a as T,c as D}from"./index-chunk-b278f882.js";import"./checkDialogSupport-chunk-14ab1891.js";import"./InputTemplate-chunk-df175f93.js";import"./getMask-chunk-73dd093f.js";const V=e({name:"ReviewForm",components:{InputTextarea:k,FadeTransition:I,InputText:b},mixins:[x],props:{agreement:{type:String,default:()=>"#"}},setup(){const e=a({}),{withMessage:o}=D,t=s("viewportUntil"),r=s("modalId");return{viewportUntil:t,withMessage:o,externalResults:e,v$:$({$externalResults:e}),modalId:r}},data:()=>({isFinished:!1,formData:{name:"",phone:"",message:""}}),validations(){return{formData:{name:{required:this.withMessage("Поле обязательно для заполнения",F)},phone:{required:this.withMessage("Поле обязательно для заполнения",F),minLength:this.withMessage("Некорректный номер телефона",M(18))},message:{required:this.withMessage("Поле обязательно для заполнения",F),maxLength:this.withMessage("Превышено максимальное количество символов (500)",T(500))}}}},methods:{sendForm(){this.v$.$validate().then((e=>{e&&(this.isFinished=!0,this.startCloseTimer(this.modalId))})).catch((e=>{console.log(e)}))}}}),j={class:"form__items form__items--2"},y={class:"form__item"},R={class:"form__item"},S={class:"form__item form__item--full"},U={class:"form__bottom form__bottom--row"},q={class:"form__submit"},C=["disabled"],B={class:"form__policy"},G=["href"],E={class:"form__final"},L={class:"form__title"},z=i("br",null,null,-1),Y=i("br",null,null,-1),Z={class:"form__close"},A=i("span",{class:"form__close-text"},"Окно автоматически закроется через",-1),H={class:"form__close-time"};const J=e({name:"ReviewModal",components:{ReviewForm:o(V,[["render",function(e,a,s,o,_,v){const g=t("InputText"),w=t("InputTextarea"),b=t("FadeTransition"),k=r("animate");return l(),m("form",{class:"form",onSubmit:a[3]||(a[3]=f(((...a)=>e.sendForm&&e.sendForm(...a)),["prevent"]))},[i("div",j,[i("div",y,[n(g,{id:"name-review",modelValue:e.formData.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData.name=a),errors:e.v$.formData.name.$errors,label:"Как вас зовут?",autocomplete:"given-name",placeholder:"Укажите имя"},null,8,["modelValue","errors"])]),i("div",R,[n(g,{id:"phone-review",modelValue:e.formData.phone,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.phone=a),errors:e.v$.formData.phone.$errors,label:"Укажите телефон",placeholder:"+7 999 999-99-99",type:"tel",autocomplete:"tel","mask-type":"phoneMask","required-text":"Обязательное поле"},null,8,["modelValue","errors"])]),i("div",S,[n(w,{id:"message-review",modelValue:e.formData.message,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.message=a),errors:e.v$.formData.message.$errors,label:"Ваш отзыв",placeholder:"Введите текст","required-text":"Обязательное поле"},null,8,["modelValue","errors"])])]),i("div",U,[i("div",q,[i("button",{class:"btn btn--color-primary",type:"submit",disabled:e.v$.$error&&e.v$.$dirty}," Отправить отзыв ",8,C)]),i("p",B,[d(" Отправляя данные, вы соглашаетесь с "),i("a",{href:e.agreement,target:"_blank"},"политикой конфиденциальности",8,G)])]),n(b,null,{default:c((()=>[u(i("div",E,[u((l(),m("h3",L,[d(" Спасибо! "),z,d(" Мы получили ваш отзыв "),Y,d(" и скоро свяжемся с вами. ")])),[[k,{animationClass:"fadeInUp"}]]),i("div",Z,[A,i("span",H,h(e.getCloseTimer),1)])],512),[[p,e.isFinished]])])),_:1})],32)}]]),IconSVG:w,BaseModal:g},setup:()=>(_("modalId","review-modal"),{})}),K={class:"modal modal--wide"},N=["onClick"],O={class:"modal__wrapper"},P=i("div",{class:"modal__top"},[i("h3",{class:"modal__title"},[d(" Поделитесь впечатлением"),i("br"),d("и опытом использования электрокара ")]),i("p",{class:"modal__subtitle"}," Мы свяжемся с вами для уточнения, что отзыв оставили именно вы. Это займет не более 1 минуты. ")],-1);const Q=o(J,[["render",function(e,a,s,o,r,m){const d=t("IconSVG"),u=t("ReviewForm"),p=t("BaseModal");return l(),v(p,{id:"review-modal"},{default:c((({close:e})=>[i("section",K,[i("button",{class:"modal__close",onClick:e},[n(d,{class:"modal__close-icon",name:"close"})],8,N),i("div",O,[P,n(u,{class:"modal__form"})])])])),_:1})}]]);export{Q as default};
